<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MSIC 2025 - Malaysian Standard Industrial Classification</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
    body { font-family: Arial, sans-serif; background: #f9f9f9; color: #333; }
    header { background: #006699; color: white; padding: 15px; text-align: center; font-size: 1.5em; font-weight: bold; }

    .btn-container { text-align: center; margin: 30px 0; }
    .btn-container button {
      background: #0077b6;
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 16px;
      margin: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }
    .btn-container button:hover { background: #005f87; }

    section { width: 90%; max-width: 1000px; margin: 20px auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { margin-bottom: 15px; color: #006699; }

    .search-bar {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    input[type="text"] {
      padding: 10px;
      font-size: 16px;
      width: 70%;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button.search-btn {
      padding: 10px 20px;
      background: #006699;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button.search-btn:hover { background: #004d66; }

    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 12px; border: 1px solid #ddd; text-align: left; }
    th { background: #0077b6; color: white; }
    tr:nth-child(even) { background: #f2f2f2; }
    tr:hover { background: #e0f7ff; }
  </style>
</head>
<body>
  <header>MSIC 2025 - Malaysian Standard Industrial Classification</header>

  <div class="btn-container">
    <button onclick="showSearch()">Search MSIC</button>
  </div>

  <section id="search-section" style="display: none;">
    <h2>MSIC Search</h2>
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Enter code or keyword..." />
      <button class="search-btn" onclick="searchCode()">Search</button>
    </div>
    <div id="resultContainer"></div>
  </section>

  <script>
    let msicData = [];

    async function loadMSIC() {
      try {
        const response = await fetch("msic25.json"); // Make sure msic25.json is in the same folder
        msicData = await response.json();
        console.log("MSIC data loaded:", msicData.length, "records");
      } catch (error) {
        console.error("Error loading MSIC data:", error);
      }
    }

    function showSearch() {
      document.querySelector(".btn-container").style.display = "none";
      document.getElementById("search-section").style.display = "block";
      searchCode(""); // show all data when entering search
    }

    function searchCode(keyword = null) {
      if (!keyword) keyword = document.getElementById("searchInput").value.trim().toLowerCase();
      const filtered = msicData.filter(item =>
        item.code.toLowerCase().includes(keyword) ||
        item.description.toLowerCase().includes(keyword)
      );

      let html = `
        <table>
          <tr>
            <th>MSIC Code</th>
            <th>Description</th>
          </tr>
      `;

      if (filtered.length === 0) {
        html += `<tr><td colspan="2" style="text-align:center;">No results found.</td></tr>`;
      } else {
        filtered.forEach(item => {
          html += `
            <tr>
              <td>${item.code}</td>
              <td>${item.description}</td>
            </tr>
          `;
        });
      }

      html += `</table>`;
      document.getElementById("resultContainer").innerHTML = html;
    }

    // Load data and automatically display all on page load
    window.addEventListener("load", async () => {
      await loadMSIC();
      const checkData = setInterval(() => {
        if (msicData.length > 0) {
          document.getElementById("search-section").style.display = "block";
          document.querySelector(".btn-container").style.display = "none";
          searchCode(""); // Show all data automatically
          clearInterval(checkData);
        }
      }, 200);
    });
  </script>
</body>
</html>
